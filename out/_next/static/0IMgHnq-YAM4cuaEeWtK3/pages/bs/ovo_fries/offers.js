(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{RWZv:function(e,t,r){"use strict";r.d(t,"c",(function(){return O})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"a",(function(){return S})),r.d(t,"d",(function(){return _}));var n=r("rePB");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o={loading:!1,error:"",message:"",bs:null,meals:[],drinks:[],offers:[]},c=r("o0o1"),u=r.n(c),i=r("vDqi"),l=r.n(i),p="https://karuapi.herokuapp.com/api",f=function(e){return{type:"BS_ERROR",payload:e}},d=function(e){return{type:"LOAD_BS",payload:e}},m=function(e){return{type:"BS_MESSAGE",payload:e}},g=function(e){return{type:"REQUEST_ORDER",payload:e}},b=function(e){return{type:"LOAD_DRINKS",payload:e}},h=function(e){return{type:"LOAD_OFFERS",payload:e}},O=function(){var e={username:"ovo_fries"};return function(t){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"BS_LOADING"}),r.next=3,u.a.awrap(l.a.post("".concat(p,"/bs/fetchBs"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(d(e.data.message))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},v=function(e){return function(t){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"BS_LOADING"}),r.next=3,u.a.awrap(l.a.post("".concat(p,"/bs/addOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(g(e.data.message))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},y=function(e){return function(t){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"BS_LOADING"}),r.next=3,u.a.awrap(l.a.post("".concat(p,"/bs/addReview"),e,{headers:{"Content-Type":"application/json"}}).then((function(){return t(m("Review sent"))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},S=function(e){return function(t){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"BS_LOADING"}),r.next=3,u.a.awrap(l.a.post("".concat(p,"/orders/claimOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){var r=e.data.success;return t(r?m(e.data.message):f(e.data.message))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},_=function(){return function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"BS_LOADING"}),t.next=3,u.a.awrap(l.a.get("".concat(p,"/bs/products")).then((function(t){return e({type:"LOAD_MEALS",payload:t.data.meals}),e(b(t.data.drinks)),e(h(t.data.offers))})).catch(console.log));case 3:case"end":return t.stop()}}),null,null,null,Promise)}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BS_LOADING":return s({},e,{error:"",message:"",loading:!0});case"BS_ERROR":return s({},e,{loading:!1,error:t.payload});case"LOAD_BS":return s({},e,{loading:!1,bs:t.payload});case"BS_MESSAGE":case"REQUEST_ORDER":return s({},e,{loading:!1,message:t.payload});case"LOAD_MEALS":return s({},e,{meals:t.payload});case"LOAD_DRINKS":return s({},e,{drinks:t.payload});case"LOAD_OFFERS":return s({},e,{offers:t.payload,loading:!1});default:return s({},e)}}},"gS/o":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bs/ovo_fries/offers",function(){return r("zl/u")}])},iuot:function(e,t,r){"use strict";var n=r("o0o1"),a=r.n(n),s=r("q1tI"),o=r.n(s),c=r("30+C"),u=r("oa/T"),i=r("Ie8z"),l=r("/MKj"),p=r("vW3o"),f=r("1OyB"),d=r("vuIU"),m=r("JX7q"),g=r("Ji7U"),b=r("md7G"),h=r("foSv"),O=r("rePB"),v=r("DCcX"),y=r("vkoW"),S=r("CaDr"),_=r("OBzv"),w=r("RWZv"),j=r("f0ot"),N=o.a.createElement;function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(g.a)(n,e);var t,r=(t=n,function(){var e,r=Object(h.a)(t);if(R()){var n=Object(h.a)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Object(b.a)(this,e)});function n(){var e;Object(f.a)(this,n);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=r.call.apply(r,[this].concat(s)),Object(O.a)(Object(m.a)(e),"state",{message:"",location:"",product:e.props.product,action:"Request delivery",error:"",response:"",redirect:!1,isOpen:!1}),Object(O.a)(Object(m.a)(e),"toggle",(function(){return e.setState({isOpen:!e.state.isOpen})})),Object(O.a)(Object(m.a)(e),"onChange",(function(t){return e.setState(Object(O.a)({},t.target.name,t.target.value))})),Object(O.a)(Object(m.a)(e),"onSubmit",(function(t){var r,n,s,o;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),e.setState({error:""}),e.setState({action:"Loading...."}),e.props.token){c.next=6;break}return c.abrupt("return",e.setState({isOpen:!0}));case 6:if(r=e.state,n=r.message,s=r.location,n&&s){c.next=9;break}return c.abrupt("return",e.setState({error:"Fill out all the details",action:"Request delivery"}));case 9:return o={message:n,location:s,user:e.props.user._id,bs:e.props.bs.username},c.next=12,a.a.awrap(e.props.requestOrder(o).then((function(){return e.setState({response:e.props.message,error:"",message:"",location:"",action:"Requested"})})).catch(console.log));case 12:case"end":return c.stop()}}),null,null,null,Promise)})),e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.product;return N(v.a,{isOpen:this.props.isOpen,toggle:this.props.toggle},N(y.a,{toggle:this.props.toggle},N("h5",{className:"details_heading"},"Request for ",e.name," delivery")),N(S.a,null,N("form",{onSubmit:this.onSubmit},N("div",{className:"form-group"},this.state.error?N("div",{className:"alert alert-danger"},this.state.error):null,this.state.response?N("div",{className:"alert alert-success"},this.state.response):null,N("div",{className:"form-group"},N("label",{htmlFor:"message"},"What are you ordering?"),N("textarea",{name:"message",className:"form-control",onChange:this.onChange,placeholder:"e.g ".concat(e.name),value:this.state.message,rows:"5",cols:"40"})),N("div",{className:"form-group"},N("label",{htmlFor:"location"},"Where are you at?"),N("input",{type:"text",name:"location",onChange:this.onChange,value:this.state.location,className:"form-control",placeholder:"e.g victoria hostels"})),N("div",{className:"form-group"},N("input",{type:"submit",onClick:this.onSubmit,className:"btn btn-outline-success",value:this.state.action})))),N(p.a,{isOpen:this.state.isOpen,toggle:this.toggle})),N(_.a,null,N("button",{className:"btn btn-outline-danger",onClick:this.props.toggle},"close")))}}]),n}(s.Component),k={requestOrder:w.e,fetchOvo:w.c,fetchUser:j.b},x=Object(l.b)((function(e){return{user:e.user.user,token:e.user.message,user_loading:e.user.loading,loading:e.bs.loading,message:e.bs.message,bs:e.bs.bs}}),k)(D),E=o.a.createElement,P={fetchUser:j.b,claimOrder:w.a};t.a=Object(l.b)((function(e){return{user:e.user.user,user_loading:e.user.loading,token:e.user.message}}),P)((function(e){var t=e.data,r=Object(s.useState)(!1),n=r[0],o=r[1],l=Object(s.useState)(!1),f=l[0],d=l[1];return E(c.a,{className:"bs_card-root"},E("div",{className:"bs_card-details"},E(u.a,{className:"bs_card-content"},E("p",{className:"bs_card-name"},t.name),E("p",{className:"bs_card-price"},"Kshs:",parseInt(t.price).toLocaleString()),E("button",{className:"btn btn-outline-success",onClick:function(){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.token){r.next=3;break}return r.abrupt("return",d(!0));case 3:if(!e.user){r.next=9;break}return r.abrupt("return",o(!0));case 9:return r.next=11,a.a.awrap(e.fetchUser(t).catch(console.log));case 11:if(e.user_loading||!e.user){r.next=13;break}return r.abrupt("return",o(!0));case 13:case 14:case"end":return r.stop()}}),null,null,null,Promise)}},"order"),E(x,{isOpen:n,toggle:function(){return o(!n)},product:t}),E(p.a,{isOpen:f,toggle:function(){return d(!f)}}))),E(i.a,{className:"bs_card-cover",title:t.name},E("img",{src:t.profile,className:"bs_card-img",alt:"Loading.."})))}))},"zl/u":function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),s=r("q1tI"),o=r.n(s),c=r("5Yp1"),u=r("QDlW"),i=r("P9Z8"),l=r("iuot"),p=r("RWZv"),f=o.a.createElement,d=function(e){var t=e.offers;return f(c.a,null,f(u.a,{title:"Offers from Ovo at allcomrades platform",description:"Get to browse some cool and amazing offers being sold at Ovo frys inn through allcomrades platform",url:"https://allcomrades.co.ke/bs/ovo_fries/offers",image:"https://karu-api.s3.amazonaws.com/adverts/1587388236611.jpg"}),f("section",{className:"ovo_fries"},f("div",{className:"container"},f("div",{className:"row"},f("div",{className:"col-12 col-sm-12 col-md-12"},f(i.a,{title:"Offers from Ovo"})),t.map((function(e,t){return f("div",{className:"col-12 col-sm-4 col-md-4",key:t},f(l.a,{data:e}))}))))))};d.getInitialProps=function(e){var t,r;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.store,n.next=3,a.a.awrap(t.dispatch(Object(p.d)()));case 3:return r=t.getState().bs.offers,n.abrupt("return",{offers:r});case 5:case"end":return n.stop()}}),null,null,null,Promise)},t.default=d}},[["gS/o",0,1,5,2,3,6,4,7,8]]]);
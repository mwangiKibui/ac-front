(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"9qD2":function(e){e.exports=JSON.parse('{"topbar.aboutUs":"About Us","topbar.contacts":"Contacts","topbar.storeLocation":"Store Location","topbar.trackOrder":"Track Order","topbar.blog":"Blog","topbar.myAccount":"My Account","topbar.currency":"Currency","topbar.language":"Language","header.phoneLabel":"Customer Service","header.phone":"(800) 060-0730"}')},"D+QG":function(e){e.exports=JSON.parse('{"topbar.aboutUs":"About Us","topbar.contacts":"Contacts","topbar.storeLocation":"Store Location","topbar.trackOrder":"Track Order","topbar.blog":"Blog","topbar.myAccount":"My Account","topbar.currency":"Currency","topbar.language":"Language","header.phoneLabel":"Customer Service","header.phone":"(800) 060-0730"}')},"W/Es":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market_place/[slug]",function(){return a("mE3r")}])},"X+GV":function(e){e.exports=JSON.parse('{"topbar.aboutUs":"\u041e \u043d\u0430\u0441","topbar.contacts":"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b","topbar.storeLocation":"\u041c\u0430\u0433\u0430\u0437\u0438\u043d","topbar.trackOrder":"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430","topbar.blog":"\u0411\u043b\u043e\u0433","topbar.myAccount":"\u0410\u043a\u043a\u0430\u0443\u043d\u0442","topbar.currency":"\u0412\u0430\u043b\u044e\u0442\u0430","topbar.language":"\u042f\u0437\u044b\u043a","header.phoneLabel":"\u0417\u0432\u043e\u043d\u043e\u043a \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439","header.phone":"(800) 060-0730"}')},mE3r:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),c=a("q1tI"),o=a.n(c),i=a("YFqc"),s=a.n(i),l=a("/MKj"),u=a("LYUY"),d=Object(u.a)(o.a.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share"),p=a("wx14"),f=a("1OyB"),h=a("vuIU"),m=a("JX7q"),b=a("Ji7U"),g=a("md7G"),v=a("foSv"),k=a("rePB"),y=a("TSYQ"),O=a.n(y),S={en:{messages:a("D+QG"),direction:"ltr"},ru:{messages:a("X+GV"),direction:"ltr"},ar:{messages:a("9qD2"),direction:"rtl"}},j=a("OlIQ"),_=a("Ff2n"),w=a("OS56"),N=a.n(w),x=o.a.createElement;function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var R=function(e){Object(b.a)(n,e);var t,a=(t=n,function(){var e,a=Object(v.a)(t);if(C()){var n=Object(v.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(g.a)(this,e)});function n(e){var t;return Object(f.a)(this,n),t=a.call(this,e),Object(k.a)(Object(m.a)(t),"slickRef",void 0),Object(k.a)(Object(m.a)(t),"originalSlickNext",(function(){})),Object(k.a)(Object(m.a)(t),"originalSlickPrev",(function(){})),Object(k.a)(Object(m.a)(t),"setRef",(function(e){t.element=e})),Object(k.a)(Object(m.a)(t),"onMousedown",(function(e){var a=e.screenX,n=e.screenY,r=function(e){t.state.preventClick||Math.sqrt(Math.pow(Math.abs(a-e.screenX),2)+Math.pow(Math.abs(n-e.screenY),2))>15&&t.setState({preventClick:!0})};document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){t.setState({preventClick:!1}),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)}))})),Object(k.a)(Object(m.a)(t),"beforeChange",(function(e,a){var n=t.props.beforeChange;n&&n(e,a),setTimeout((function(){t.setState({activeSlides:t.getActiveSlides(a)})}),0)})),Object(k.a)(Object(m.a)(t),"setSlickRef",(function(e){var a=t.props.forwardRef;a&&a(e),e&&e!==t.slickRef&&(t.originalSlickNext=e.slickNext,t.originalSlickPrev=e.slickPrev,e.slickNext=t.slickNext,e.slickPrev=t.slickPrev),t.slickRef=e})),Object(k.a)(Object(m.a)(t),"slickNext",(function(){var e=t.props.locale;"rtl"===S[e].direction?t.originalSlickPrev():t.originalSlickNext()})),Object(k.a)(Object(m.a)(t),"slickPrev",(function(){var e=t.props.locale;"rtl"===S[e].direction?t.originalSlickNext():t.originalSlickPrev()})),t.state={preventClick:!1,activeSlides:t.getActiveSlides(t.getStartPosition())},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.element&&(this.element.addEventListener("mousedown",this.onMousedown),this.slickRef&&this.slickRef.slickGoTo(this.getStartPosition(),!0))}},{key:"componentDidUpdate",value:function(e){var t=this,a=e.locale,n=e.children,r=S[a].direction,c=this.props,o=c.locale,i=c.children;S[o].direction!==r&&this.slickRef&&this.slickRef.slickGoTo(this.getStartPosition(),!0),i!==n&&setTimeout((function(){t.setState({activeSlides:t.getActiveSlides(t.getStartPosition())})}),0)}},{key:"componentWillUnmount",value:function(){this.element&&this.element.removeEventListener("mousedown",this.onMousedown)}},{key:"getSlidesCount",value:function(){var e=this.props.children;return o.a.Children.toArray(e).length}},{key:"getStartPosition",value:function(){var e=this.props.infinite,t=this.props.locale;if(e=!0===e||void 0===e,"ltr"===S[t].direction)return 0;var a=this.getSlidesToShow(),n=this.getSlidesCount();return e?(Math.ceil(n/a)-1)*a:Math.max(0,n-a)}},{key:"getActiveSlides",value:function(e){for(var t=this.getSlidesToShow(),a=[],n=this.getSlidesCount(),r=Math.max(0,Math.min(n-t,e)),c=Math.min(n,r+t),o=r;o<c;o+=1)a.push(o);return a}},{key:"getSlidesToShow",value:function(){var e=this.props,t=e.responsive,a=e.slidesToShow||1;return t&&t.forEach((function(e){matchMedia("(max-width: ".concat(e.breakpoint,"px)")).matches&&e.settings.slidesToShow&&(a=e.settings.slidesToShow)})),a}},{key:"render",value:function(){var e=this.props,t=e.children,a=(e.forwardRef,e.locale),n=(e.beforeChange,Object(_.a)(e,["children","forwardRef","locale","beforeChange"])),r=this.state,c=r.preventClick,i=r.activeSlides,s=S[a].direction,l=O()("slick-prevent-click",{"slick-prevent-click--active":c}),u=o.a.Children.toArray(t);return"rtl"===s&&(u=t.slice(0)).reverse(),u=u.map((function(e,t){var a=O()({"correct-slick-active":i.includes(t)});return x("div",{key:t,dir:s,className:a},e)})),x("div",{className:l,onMouseDown:this.onMousedown,ref:this.setRef},x(N.a,Object(p.a)({},n,{rtl:"rtl"===s,beforeChange:this.beforeChange,ref:this.setSlickRef}),u))}}]),n}(c.Component),P=Object(l.b)((function(e){return{locale:e.locale}}))(R),D=o.a.forwardRef((function(e,t){return x(P,Object(p.a)({forwardRef:t},e))})),T=o.a.createElement;function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=function(e){Object(b.a)(r,e);var t,n=(t=r,function(){var e,a=Object(v.a)(t);if(M()){var n=Object(v.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(g.a)(this,e)});function r(e){var t;return Object(f.a)(this,r),t=n.call(this,e),Object(k.a)(Object(m.a)(t),"gallery",void 0),Object(k.a)(Object(m.a)(t),"createGallery",null),Object(k.a)(Object(m.a)(t),"imagesRefs",[]),Object(k.a)(Object(m.a)(t),"unmounted",!1),Object(k.a)(Object(m.a)(t),"handleFeaturedClick",(function(e,a){if(t.createGallery){e.preventDefault();var n=t.props,r=n.images,c=n.locale,o=S[c].direction,i=r.map((function(e){return{src:e,msrc:e,w:700,h:700}}));"rtl"===o&&i.reverse();var s={getThumbBoundsFn:function(e){var a=t.getIndexDependOnDir(e);if(!t.imagesRefs[a])return null;var n=t.imagesRefs[a],r=window.pageYOffset||document.documentElement.scrollTop,c=n.getBoundingClientRect();return{x:c.left,y:c.top+r,w:c.width}},index:t.getIndexDependOnDir(a),bgOpacity:.9,history:!1};t.createGallery.then((function(e){t.unmounted||(t.gallery=e(i,s),t.gallery.listen("beforeChange",(function(){t.gallery&&t.slickFeaturedRef&&t.slickFeaturedRef.slickGoTo(t.gallery.getCurrentIndex(),!0)})),t.gallery.listen("destroy",(function(){t.gallery=null})),t.gallery.init())}))}})),Object(k.a)(Object(m.a)(t),"handleThumbnailClick",(function(e){t.state.transition||(t.setState((function(){return{currentIndex:e}})),t.slickFeaturedRef&&t.slickFeaturedRef.slickGoTo(t.getIndexDependOnDir(e)))})),Object(k.a)(Object(m.a)(t),"handleFeaturedBeforeChange",(function(e,a){t.setState((function(){return{currentIndex:t.getIndexDependOnDir(a),transition:!0}}))})),Object(k.a)(Object(m.a)(t),"handleFeaturedAfterChange",(function(e){t.setState((function(){return{currentIndex:t.getIndexDependOnDir(e),transition:!1}}))})),Object(k.a)(Object(m.a)(t),"setSlickFeaturedRef",(function(e){t.slickFeaturedRef=e})),t.state={currentIndex:0,transition:!1},t}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.createGallery=Promise.all([a.e(37),a.e(38)]).then(a.bind(null,"ew+A")).then((function(e){return e.createGallery})),setTimeout((function(){e.setState((function(){return{transition:!1}}))}),0)}},{key:"componentDidUpdate",value:function(e){var t=this,a=e.locale,n=S[a].direction,r=this.props.locale;S[r].direction!==n&&setTimeout((function(){t.setState((function(){return{transition:!1}}))}),0)}},{key:"componentWillUnmount",value:function(){this.gallery&&this.gallery.destroy(),this.unmounted=!0}},{key:"getIndexDependOnDir",value:function(e){var t=this.props,a=t.images,n=t.locale;return"rtl"===S[n].direction?a.length-1-e:e}},{key:"render",value:function(){var e=this,t=this.props.images,a=this.state.currentIndex,n=t.map((function(t,a){return T(s.a,{key:a,href:"/".concat(t)},T("a",{onClick:function(t){return e.handleFeaturedClick(t,a)},target:"_blank"},T("img",{src:t,alt:"",className:"product-gallery__featured-image",ref:function(t){e.imagesRefs[a]=t}})))})),r=t.map((function(t,n){var r=O()("product-gallery__carousel-item",{"product-gallery__carousel-item--active":n===a});return T("button",{type:"button",key:n,onClick:function(){return e.handleThumbnailClick(n)},className:r},T("img",{className:"product-gallery__carousel-image",src:t,alt:""}))}));return T("div",{className:"product__gallery"},T("div",{className:"product-gallery"},T("div",{className:"product-gallery__featured"},T(D,Object(p.a)({ref:this.setSlickFeaturedRef},j.c,{beforeChange:this.handleFeaturedBeforeChange,afterChange:this.handleFeaturedAfterChange}),n)),T("div",{className:"product-gallery__carousel"},T(D,j.d.standard,r))))}}]),r}(c.Component);I.defaultProps={images:[],layout:"standard"};var L=Object(l.b)((function(e){return{locale:e.locale}}))(I),E=a("uCnE"),A=a("TbMw"),F=a("5Yp1"),G=a("NeII"),U=a("dtRg"),B=a("rnyU"),Y=o.a.createElement,q=function(e){var t=Object(c.useState)(e.slug)[0],a=Object(c.useState)(e.related)[0],n=Object(c.useState)(e.product)[0],i=Object(c.useState)(!1),s=i[0],l=i[1],u=Object(c.useState)("Show seller phone number"),p=u[0],f=u[1],h=Object(c.useState)(e.error)[0],m=Object(c.useState)(!1),b=m[0],g=m[1],v=function(){return g(!b)},k="Shop for ".concat(n.name," from allcomrades platform"),y="https://allcomrades.co.ke/platform/products/".concat(t),O="Share ".concat(n.name," with your friends");return Y(F.a,null,h?Y(E.a,{message:h}):Y(o.a.Fragment,null,Y("div",{className:"container"},Y("div",{className:"row"},Y("div",{className:"col-12 col-sm-12 col-md-12"},Y(A.a,{breadcrumb:[{title:"Home",url:"/"},{title:"Market Place",url:"/market_place"},{title:"".concat(n.name),url:"/market_place/".concat(n.slug)}]}))),Y("div",{className:"product product--layout--'standard'"},Y("div",{className:"product__content"},Y(L,{layout:"layout",images:n.profiles}),Y("div",{className:"product__info"},Y("h1",{className:"product__name"},n.name),Y("div",{className:"product__description"},Y("p",null,n.description)),Y("ul",{className:"product__meta"},Y("li",{className:"product__meta-availability"},"Availability:"," ",n.availability?"In Stock"===n.availability?Y("span",{className:"text-success"},"In Stock"):Y("span",{className:"text-danger"},"Out of stock"):null))),Y("div",{className:"product__sidebar"},Y("div",{className:"product__availability"},Y("p",{className:"text-white"},"Availability:")," ","In Stock"===n.availability?Y("span",{className:"text-success"},"In Stock"):Y("span",{className:"text-danger"},"Out of stock")),Y("div",{className:"product__prices"},n.price?Y("span",{className:"product__price"},"KSHS:",parseInt(n.price).toLocaleString(),"."):null,"    ",n.price_type?Y("span",{className:"product__price"},"The price is ",n.price_type):null)),Y("div",{className:"product__footer"},Y("button",{className:"btn btn-outline-success",onClick:v},Y(d,null)," share"),Y(U.a,{isOpen:b,toggle:v,link:y,title:k,message:O}),s?Y("p",{className:"product__footer_text"},"+254",n.seller.phone):Y("button",{className:"btn btn-outline-info",onClick:function(){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return f("Loading"),a.next=3,r.a.awrap(e.addProductViews(t).then((function(){return l(!0)})).catch(console.log));case 3:case"end":return a.stop()}}),null,null,null,Promise)}},p)))),a.length>0?Y("div",{className:"row"},Y(G.a,{title:"Related products",data:a,card:"products"})):null)))};q.defaultProps={layout:"standard"},q.getInitialProps=function(e){var t,a,n,c,o,i;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.store,a=e.query,s.next=3,r.a.awrap(t.dispatch(Object(B.e)(a.slug)));case 3:return s.next=5,r.a.awrap(t.dispatch(Object(B.f)()));case 5:return n=t.getState().products.product,c=t.getState().products.error,o=t.getState().products.basic,i=o.filter((function(e){return e.slug!==a.slug})),s.abrupt("return",{product:n,related:i,slug:a.slug,error:c});case 10:case"end":return s.stop()}}),null,null,null,Promise)};var J={addProductViews:B.a};t.default=Object(l.b)(null,J)(q)}},[["W/Es",0,1,3,8,13,2,4,6,5,7,10,9,12,14,15]]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{QDlW:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("8Kt/"),s=n.n(o),c=a.a.createElement,i=function(e){return c(s.a,null,c("title",null,e.title),c("meta",{name:"description",content:e.description}),c("meta",{property:"og:type",content:"website"}),c("meta",{name:"og:title",property:"og:title",content:e.title}),c("meta",{name:"og:description",property:"og:description",content:e.description}),c("meta",{name:"og:site_name",content:"allcomrades platform"}),c("meta",{name:"og:url",content:e.url}),c("meta",{name:"twitter:card",content:"summary"}),c("meta",{name:"twitter:title",content:e.title}),c("meta",{name:"twitter:description",content:e.description}),c("meta",{name:"twitter:site",content:e.url}),c("meta",{name:"twitter:creator",content:"allcomrades platform"}),c("meta",{name:"twitter:image",content:e.image}),c("meta",{name:"twitter:image:width",content:"1200"}),c("meta",{name:"twitter:image:height",content:"600"}),c("link",{rel:"icon",type:"image/png",href:"/static/images/favicon.ico"}),c("link",{rel:"apple-touch-icon",href:"/static/images/favicon.ico"}),c("meta",{property:"og:image",content:e.image}),c("meta",{name:"og:image:width",content:"1200"}),c("meta",{name:"og:image:height",content:"600"}))};i.defaultProps={description:"A comrades platform for student marketplace, business and influencer marketing and much more",url:"https://allcomrades.co.ke",title:"allcomrades platform",desc:"A platform for karatina university students to sell and interact with businesses."},t.a=i},RWZv:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return S}));var r=n("rePB");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={loading:!1,error:"",message:"",bs:null,meals:[],drinks:[],offers:[]},c=n("o0o1"),i=n.n(c),u=n("vDqi"),l=n.n(u),p="https://karuapi.herokuapp.com/api",m=function(e){return{type:"BS_ERROR",payload:e}},f=function(e){return{type:"LOAD_BS",payload:e}},d=function(e){return{type:"BS_MESSAGE",payload:e}},g=function(e){return{type:"REQUEST_ORDER",payload:e}},h=function(e){return{type:"LOAD_DRINKS",payload:e}},b=function(e){return{type:"LOAD_OFFERS",payload:e}},O=function(){var e={username:"ovo_fries"};return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"BS_LOADING"}),n.next=3,i.a.awrap(l.a.post("".concat(p,"/bs/fetchBs"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(f(e.data.message))})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}},v=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"BS_LOADING"}),n.next=3,i.a.awrap(l.a.post("".concat(p,"/bs/addOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(g(e.data.message))})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}},y=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"BS_LOADING"}),n.next=3,i.a.awrap(l.a.post("".concat(p,"/bs/addReview"),e,{headers:{"Content-Type":"application/json"}}).then((function(){return t(d("Review sent"))})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}},w=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"BS_LOADING"}),n.next=3,i.a.awrap(l.a.post("".concat(p,"/orders/claimOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){var n=e.data.success;return t(n?d(e.data.message):m(e.data.message))})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}},S=function(){return function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"BS_LOADING"}),t.next=3,i.a.awrap(l.a.get("".concat(p,"/bs/products")).then((function(t){return e({type:"LOAD_MEALS",payload:t.data.meals}),e(h(t.data.drinks)),e(b(t.data.offers))})).catch(console.log));case 3:case"end":return t.stop()}}),null,null,null,Promise)}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BS_LOADING":return o({},e,{error:"",message:"",loading:!0});case"BS_ERROR":return o({},e,{loading:!1,error:t.payload});case"LOAD_BS":return o({},e,{loading:!1,bs:t.payload});case"BS_MESSAGE":case"REQUEST_ORDER":return o({},e,{loading:!1,message:t.payload});case"LOAD_MEALS":return o({},e,{meals:t.payload});case"LOAD_DRINKS":return o({},e,{drinks:t.payload});case"LOAD_OFFERS":return o({},e,{offers:t.payload,loading:!1});default:return o({},e)}}},"gS/o":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bs/ovo_fries/offers",function(){return n("zl/u")}])},iuot:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("q1tI"),s=n.n(o),c=n("30+C"),i=n("oa/T"),u=n("Ie8z"),l=n("/MKj"),p=n("vW3o"),m=n("1OyB"),f=n("vuIU"),d=n("JX7q"),g=n("Ji7U"),h=n("md7G"),b=n("foSv"),O=n("rePB"),v=n("DCcX"),y=n("vkoW"),w=n("CaDr"),S=n("OBzv"),_=n("RWZv"),j=n("f0ot"),N=s.a.createElement;function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(g.a)(r,e);var t,n=(t=r,function(){var e,n=Object(b.a)(t);if(k()){var r=Object(b.a)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Object(h.a)(this,e)});function r(){var e;Object(m.a)(this,r);for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=n.call.apply(n,[this].concat(o)),Object(O.a)(Object(d.a)(e),"state",{message:"",location:"",product:e.props.product,action:"Request delivery",error:"",response:"",redirect:!1,isOpen:!1}),Object(O.a)(Object(d.a)(e),"toggle",(function(){return e.setState({isOpen:!e.state.isOpen})})),Object(O.a)(Object(d.a)(e),"onChange",(function(t){return e.setState(Object(O.a)({},t.target.name,t.target.value))})),Object(O.a)(Object(d.a)(e),"onSubmit",(function(t){var n,r,o,s;return a.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),e.setState({error:""}),e.setState({action:"Loading...."}),e.props.token){c.next=6;break}return c.abrupt("return",e.setState({isOpen:!0}));case 6:if(n=e.state,r=n.message,o=n.location,r&&o){c.next=9;break}return c.abrupt("return",e.setState({error:"Fill out all the details",action:"Request delivery"}));case 9:return s={message:r,location:o,user:e.props.user._id,bs:e.props.bs.username},c.next=12,a.a.awrap(e.props.requestOrder(s).then((function(){return e.setState({response:e.props.message,error:"",message:"",location:"",action:"Requested"})})).catch(console.log));case 12:case"end":return c.stop()}}),null,null,null,Promise)})),e}return Object(f.a)(r,[{key:"render",value:function(){var e=this.state.product;return N(v.a,{isOpen:this.props.isOpen,toggle:this.props.toggle},N(y.a,{toggle:this.props.toggle},N("h5",{className:"details_heading"},"Request for ",e.name," delivery")),N(w.a,null,N("form",{onSubmit:this.onSubmit},N("div",{className:"form-group"},this.state.error?N("div",{className:"alert alert-danger"},this.state.error):null,this.state.response?N("div",{className:"alert alert-success"},this.state.response):null,N("div",{className:"form-group"},N("label",{htmlFor:"message"},"What are you ordering?"),N("textarea",{name:"message",className:"form-control",onChange:this.onChange,placeholder:"e.g ".concat(e.name),value:this.state.message,rows:"5",cols:"40"})),N("div",{className:"form-group"},N("label",{htmlFor:"location"},"Where are you at?"),N("input",{type:"text",name:"location",onChange:this.onChange,value:this.state.location,className:"form-control",placeholder:"e.g victoria hostels"})),N("div",{className:"form-group"},N("input",{type:"submit",onClick:this.onSubmit,className:"btn btn-outline-success",value:this.state.action})))),N(p.a,{isOpen:this.state.isOpen,toggle:this.toggle})),N(S.a,null,N("button",{className:"btn btn-outline-danger",onClick:this.props.toggle},"close")))}}]),r}(o.Component),R={requestOrder:_.e,fetchOvo:_.c,fetchUser:j.b},x=Object(l.b)((function(e){return{user:e.user.user,token:e.user.message,user_loading:e.user.loading,loading:e.bs.loading,message:e.bs.message,bs:e.bs.bs}}),R)(D),E=s.a.createElement,P={fetchUser:j.b,claimOrder:_.a};t.a=Object(l.b)((function(e){return{user:e.user.user,user_loading:e.user.loading,token:e.user.message}}),P)((function(e){var t=e.data,n=Object(o.useState)(!1),r=n[0],s=n[1],l=Object(o.useState)(!1),m=l[0],f=l[1];return E(c.a,{className:"bs_card-root"},E("div",{className:"bs_card-details"},E(i.a,{className:"bs_card-content"},E("p",{className:"bs_card-name"},t.name),E("p",{className:"bs_card-price"},"Kshs:",parseInt(t.price).toLocaleString()),E("button",{className:"btn btn-outline-success",onClick:function(){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.token){n.next=3;break}return n.abrupt("return",f(!0));case 3:if(!e.user){n.next=9;break}return n.abrupt("return",s(!0));case 9:return n.next=11,a.a.awrap(e.fetchUser(t).catch(console.log));case 11:if(e.user_loading||!e.user){n.next=13;break}return n.abrupt("return",s(!0));case 13:case 14:case"end":return n.stop()}}),null,null,null,Promise)}},"order"),E(x,{isOpen:r,toggle:function(){return s(!r)},product:t}),E(p.a,{isOpen:m,toggle:function(){return f(!m)}}))),E(u.a,{className:"bs_card-cover",title:t.name},E("img",{src:t.profile,className:"bs_card-img",alt:"Loading.."})))}))},"zl/u":function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),o=n("q1tI"),s=n.n(o),c=n("5Yp1"),i=n("QDlW"),u=n("P9Z8"),l=n("iuot"),p=n("RWZv"),m=s.a.createElement,f=function(e){var t=e.offers;return m(c.a,null,m(i.a,{title:"Offers from Ovo at allcomrades platform",description:"Get to browse some cool and amazing offers being sold at Ovo frys inn through allcomrades platform",url:"https://allcomrades.co.ke/bs/ovo_fries/offers",image:"https://karu-api.s3.amazonaws.com/adverts/1587388236611.jpg"}),m("section",{className:"ovo_fries"},m("div",{className:"container"},m("div",{className:"row"},m("div",{className:"col-12 col-sm-12 col-md-12"},m(u.a,{title:"Offers from Ovo"})),t.map((function(e,t){return m("div",{className:"col-12 col-sm-4 col-md-4",key:t},m(l.a,{data:e}))}))))))};f.getInitialProps=function(e){var t,n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.store,r.next=3,a.a.awrap(t.dispatch(Object(p.d)()));case 3:return n=t.getState().bs.offers,r.abrupt("return",{offers:n});case 5:case"end":return r.stop()}}),null,null,null,Promise)},t.default=f}},[["gS/o",0,1,3,2,4,6,5,7]]]);
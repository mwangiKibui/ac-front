(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"5XrH":function(e,t,n){"use strict";var a=n("h4VS"),r=n("vOnD"),o=n("q1tI"),s=n.n(o),c=n("Nm0s"),l=n("qKvR"),i=s.a.createElement;function u(){var e=Object(a.a)(["\n  display:block,\n  margin:0 auto,\n  border-color:rgb(19,38,57)\n"]);return u=function(){return e},e}var p=Object(l.css)(u()),d=Object(r.b)(c.ClipLoader).withConfig({displayName:"Loader___StyledClipLoader",componentId:"sc-1air093-0"})(["",""],p);t.a=function(e){var t=e.loading;return i("div",{className:"loader_container"},i("div",{className:"loader"},i(d,{size:40,color:"#009933",loading:t}),i("h2",{className:"loader_text"},"Please Wait!!")))}},E0wc:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),o=n("KQm4"),s=n("q1tI"),c=n.n(s),l=n("nOHt"),i=n("5Yp1"),u=n("1OyB"),p=n("vuIU"),d=n("JX7q"),h=n("Ji7U"),m=n("md7G"),f=n("foSv"),g=n("rePB"),w=n("YFqc"),v=n.n(w),y=n("/MKj"),O=n("dXLW"),b=n("duNf"),E=n("uCnE"),_=n("5XrH"),S=n("NeII"),N=n("dtRg"),j=n("EenU"),L=c.a.createElement;function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(h.a)(a,e);var t,n=(t=a,function(){var e,n=Object(f.a)(t);if(T()){var a=Object(f.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(m.a)(this,e)});function a(e){var t;return Object(u.a)(this,a),t=n.call(this,e),Object(g.a)(Object(d.a)(t),"shareToggle",(function(){return t.setState({shareIsOpen:!t.state.shareIsOpen})})),Object(g.a)(Object(d.a)(t),"handleShowNumber",(function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({action:"Loading.."}),e.next=3,r.a.awrap(t.props.addHostelView(t.state.hostelSlug).then((function(){return t.setState({showNumber:!0})})).catch(console.log));case 3:case"end":return e.stop()}}),null,null,null,Promise)})),t.state={hostelSlug:t.props.slug,loading:!1,action:"Show caretaker's phone number",showNumber:!1,related:t.props.related,error:t.props.error,hostel:t.props.hostel,shareIsOpen:!1,reviews:t.props.reviews},t}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.hostel!==e.hostel&&this.setState({hostel:this.props.hostel}),this.props.slug!==e.slug&&this.setState({hostelSlug:this.props.slug}),this.props.related!==e.related&&this.setState({related:this.props.related})}},{key:"render",value:function(){var e=this.state,t=e.hostel,n=e.loading,a=e.error,r=e.related,o=e.hostelSlug,s=e.showNumber,l="Review and Book your place at ".concat(t.name," from allcomrades platform"),i="https://allcomrades.co.ke/hostels/".concat(o),u="Share ".concat(t.name," with your friends easily");return L(c.a.Fragment,null,n?L(_.a,null):a?L(E.a,{message:a}):L(c.a.Fragment,null,L("section",{className:"hostel"},L("div",{className:"product product--layout--standard"},L("div",{className:"product__content"},L(b.a,{layout:"standard",images:t.profiles}),L("div",{className:"product__info"},L("h1",{className:"product__name"},t.name,",",t.location),L("div",{className:"product__reviews"},L(v.a,{href:"/hostels/".concat(this.state.hostelSlug,"/reviews")},L("a",{className:"product_reviews-link"},"".concat(this.state.reviews.length," Review(s)")))),L("div",{className:"product__description"},L("p",null,t.description)),L("ul",{className:"product__meta"},L("li",{className:"product__meta-availability"},"Rent: Kshs"," ",parseInt(t.rent).toLocaleString(),"  "," "," ",t.rent_duration,"  ",L("br",null),"Deposit:",t.deposit?" Kshs ".concat(parseInt(t.deposit).toLocaleString()):"None"))),L("div",{className:"product__footer"},L("button",{className:"btn btn-outline-success",onClick:this.shareToggle},L(O.a,null)," share"),L(N.a,{isOpen:this.state.shareIsOpen,toggle:this.shareToggle,link:i,title:l,message:u}),L("button",{className:"btn btn-outline-info",onClick:this.handleShowNumber},s?"".concat(t.caretaker):this.state.action)))),r.length>0?L("div",{className:"row"},L(S.a,{title:"Related Hostels",data:r,card:"hostels"})):null)))}}]),a}(s.Component);D.defaultProps={layout:"standard"};var I={addHostelView:j.a},H=Object(y.b)((function(e){return{reviews:e.hostels.reviews}}),I)(D),P=n("TbMw"),k=n("QDlW"),R=c.a.createElement,x=function(e){var t=e.hostel,n=e.related,a=e.error,r=Object(l.useRouter)().query.slug;return R(i.a,null,R(k.a,{description:"".concat(t.name," on allcomrades platform"),url:"www.allcomrades.co.ke/platform/hostels/".concat(t.slug),title:"".concat(t.name," Hostels"),image:"".concat(t.profiles[0])}),R("section",{className:"hostel"},R("div",{className:"container"},R("div",{className:"row"},R("div",{className:"col-12 col-sm-12 col-md-12"},R(P.a,{breadcrumb:[{title:"Home",url:"/"},{title:"Hostels",url:"/hostels"},{title:"".concat(t.name),url:"/hostels/".concat(t.name)}]}))),R(H,{slug:r,hostel:t,related:n,error:a}))))};x.getInitialProps=function(e){var t,n,a,s,c,l,i,u;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.store,n=e.query,p.next=3,r.a.awrap(t.dispatch(Object(j.d)(n.slug)).then((function(){})));case 3:return p.next=5,r.a.awrap(t.dispatch(Object(j.c)()));case 5:return p.next=7,r.a.awrap(t.dispatch(Object(j.e)(t.getState().hostels.hostel.reviews)));case 7:return a=t.getState().hostels.hostels,s=t.getState().hostels.hostel,c=t.getState().hostels.error,l=a.filter((function(e){return e.slug!==n.slug&&e.location===s.location})),i=a.filter((function(e){return e.slug!==n.slug&&e.location!==s.location})),u=[].concat(Object(o.a)(l),Object(o.a)(i)),p.abrupt("return",{hostel:s,related:u,error:c});case 14:case"end":return p.stop()}}),null,null,null,Promise)};t.default=x},EenU:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return E}));var a=n("KQm4"),r=n("rePB");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={loading:!1,hostels:[],hostel:{},reviews:[]},l=n("o0o1"),i=n.n(l),u=n("vDqi"),p=n.n(u),d="https://karuapi.herokuapp.com/api/",h=function(e){return{type:"HOSTEL_FETCH",payload:e}},m=function(e){return{type:"LOAD_REVIEWS",payload:e}},f=function(e){return{type:"ADD_REVIEW",payload:e}},g=function(e){return{type:"DELETE_REVIEW",payload:e}},w=function(){return function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"HOSTEL_LOADING"}),t.next=3,i.a.awrap(p.a.get("".concat(d,"/hostels/fetchHostels")).then((function(t){return e({type:"HOSTELS_FETCH",payload:t.data.message})})).catch(console.log));case 3:case"end":return t.stop()}}),null,null,null,Promise)}},v=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"HOSTEL_LOADING"}),n.next=3,i.a.awrap(p.a.get("".concat(d,"/hostels/").concat(e)).then((function(e){return t(h(e.data.message))})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}},y=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"HOSTEL_LOADING"}),n.abrupt("return",t(m(e)));case 2:case"end":return n.stop()}}),null,null,null,Promise)}},O=function(e,t,n){return function(a){return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"HOSTEL_LOADING"}),r.next=3,i.a.awrap(p.a.post("".concat(d,"/hostels/addReview/").concat(t),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return a(h(e.data.message)),a(f(n))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},b=function(e,t){var n={review:t};return function(a){return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"HOSTEL_LOADING"}),r.next=3,i.a.awrap(p.a.post("".concat(d,"/hostels/deleteReview/").concat(e),n,{headers:{"Content-Type":"application/json"}}).then((function(e){return a(h(e.data.message)),a(g(t))})).catch(console.log));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},E=function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"HOSTEL_LOADING"}),n.next=3,i.a.awrap(p.a.post("".concat(d,"/hostels/addViews"),{slug:e},{headers:{"Content-Type":"application/json"}}).then((function(e){if(e.data.success)return t({type:"RESET_HOSTEL_LOADING"})})).catch(console.log));case 3:case"end":return n.stop()}}),null,null,null,Promise)}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOSTEL_LOADING":return s({},e,{loading:!0});case"RESET_HOSTEL_LOADING":return s({},e,{loading:!1});case"HOSTELS_FETCH":return s({},e,{loading:!1,hostels:t.payload});case"HOSTEL_FETCH":return s({},e,{loading:!1,hostel:t.payload});case"LOAD_REVIEWS":return s({},e,{reviews:t.payload,loading:!1});case"ADD_REVIEW":return s({},e,{reviews:[].concat(Object(a.a)(e.reviews),[t.payload]),loading:!1});case"DELETE_REVIEW":return s({},e,{reviews:e.reviews.filter((function(e){return e._id!==t.payload})),loading:!1});default:return s({},e)}}},QDlW:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("8Kt/"),s=n.n(o),c=r.a.createElement,l=function(e){return c(s.a,null,c("title",null,e.title),c("meta",{name:"description",content:e.description}),c("meta",{property:"og:type",content:"website"}),c("meta",{name:"og:title",property:"og:title",content:e.title}),c("meta",{name:"og:description",property:"og:description",content:e.description}),c("meta",{name:"og:site_name",content:"allcomrades platform"}),c("meta",{name:"og:url",content:e.url}),c("meta",{name:"twitter:card",content:"summary"}),c("meta",{name:"twitter:title",content:e.title}),c("meta",{name:"twitter:description",content:e.description}),c("meta",{name:"twitter:site",content:e.url}),c("meta",{name:"twitter:creator",content:"allcomrades platform"}),c("meta",{name:"twitter:image",content:e.image}),c("meta",{name:"twitter:image:width",content:"1200"}),c("meta",{name:"twitter:image:height",content:"600"}),c("link",{rel:"icon",type:"image/png",href:"/static/images/favicon.ico"}),c("link",{rel:"apple-touch-icon",href:"/static/images/favicon.ico"}),c("meta",{property:"og:image",content:e.image}),c("meta",{name:"og:image:width",content:"1200"}),c("meta",{name:"og:image:height",content:"600"}))};l.defaultProps={description:"A comrades platform for student marketplace, business and influencer marketing and much more",url:"https://allcomrades.co.ke",title:"allcomrades platform",desc:"A platform for karatina university students to sell and interact with businesses."},t.a=l},h4VS:function(e,t,n){"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return a}))},l387:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hostels/[slug]",function(){return n("E0wc")}])}},[["l387",0,1,6,9,14,2,4,3,5,7,8,11,10,12,13,16,15,17,18,19]]]);
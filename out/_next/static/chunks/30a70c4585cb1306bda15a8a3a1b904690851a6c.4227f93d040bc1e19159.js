(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"30+C":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("kKAo"),i=a("H2TA"),u=s.forwardRef((function(e,t){var a=e.classes,i=e.className,u=e.raised,l=void 0!==u&&u,d=Object(r.a)(e,["classes","className","raised"]);return s.createElement(c.a,Object(n.a)({className:Object(o.a)(a.root,i),elevation:l?8:1,ref:t},d))}));t.a=Object(i.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(u)},Ie8z:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("H2TA"),i=["video","audio","picture","iframe","img"],u=s.forwardRef((function(e,t){var a=e.children,c=e.classes,u=e.className,l=e.component,d=void 0===l?"div":l,p=e.image,f=e.src,m=e.style,b=Object(r.a)(e,["children","classes","className","component","image","src","style"]),g=-1!==i.indexOf(d),h=!g&&p?Object(n.a)({backgroundImage:'url("'.concat(p,'")')},m):m;return s.createElement(d,Object(n.a)({className:Object(o.a)(c.root,u,g&&c.media,-1!=="picture img".indexOf(d)&&c.img),ref:t,style:h,src:g?p||f:void 0},b),a)}));t.a=Object(c.a)({root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"},img:{objectFit:"cover"}},{name:"MuiCardMedia"})(u)},P9Z8:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=a("YFqc"),o=a.n(s),c=r.a.createElement;function i(e){var t=e.title,a=e.link;return c(r.a.Fragment,null,c("div",{className:"block-header"},c("h3",{className:"block-header__title"},t),a?c("div",{className:"block-header__link"},c(o.a,{href:a},c("a",{className:"btn btn-outline-success"},"view all"))):null))}i.defaultProps={link:!1},t.a=i},RWZv:function(e,t,a){"use strict";a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return O})),a.d(t,"f",(function(){return y})),a.d(t,"a",(function(){return j})),a.d(t,"d",(function(){return w}));var n=a("rePB");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var o={loading:!1,error:"",message:"",bs:null,meals:[],drinks:[],offers:[]},c=a("o0o1"),i=a.n(c),u=a("vDqi"),l=a.n(u),d="https://karuapi.herokuapp.com/api",p=function(e){return{type:"BS_ERROR",payload:e}},f=function(e){return{type:"LOAD_BS",payload:e}},m=function(e){return{type:"BS_MESSAGE",payload:e}},b=function(e){return{type:"REQUEST_ORDER",payload:e}},g=function(e){return{type:"LOAD_DRINKS",payload:e}},h=function(e){return{type:"LOAD_OFFERS",payload:e}},v=function(){var e={username:"ovo_fries"};return function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"BS_LOADING"}),a.next=3,i.a.awrap(l.a.post("".concat(d,"/bs/fetchBs"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(f(e.data.message))})).catch(console.log));case 3:case"end":return a.stop()}}),null,null,null,Promise)}},O=function(e){return function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"BS_LOADING"}),a.next=3,i.a.awrap(l.a.post("".concat(d,"/bs/addOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){return t(b(e.data.message))})).catch(console.log));case 3:case"end":return a.stop()}}),null,null,null,Promise)}},y=function(e){return function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"BS_LOADING"}),a.next=3,i.a.awrap(l.a.post("".concat(d,"/bs/addReview"),e,{headers:{"Content-Type":"application/json"}}).then((function(){return t(m("Review sent"))})).catch(console.log));case 3:case"end":return a.stop()}}),null,null,null,Promise)}},j=function(e){return function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"BS_LOADING"}),a.next=3,i.a.awrap(l.a.post("".concat(d,"/orders/claimOrder"),e,{headers:{"Content-Type":"application/json"}}).then((function(e){var a=e.data.success;return t(a?m(e.data.message):p(e.data.message))})).catch(console.log));case 3:case"end":return a.stop()}}),null,null,null,Promise)}},w=function(){return function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"BS_LOADING"}),t.next=3,i.a.awrap(l.a.get("".concat(d,"/bs/products")).then((function(t){return e({type:"LOAD_MEALS",payload:t.data.meals}),e(g(t.data.drinks)),e(h(t.data.offers))})).catch(console.log));case 3:case"end":return t.stop()}}),null,null,null,Promise)}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BS_LOADING":return s({},e,{error:"",message:"",loading:!0});case"BS_ERROR":return s({},e,{loading:!1,error:t.payload});case"LOAD_BS":return s({},e,{loading:!1,bs:t.payload});case"BS_MESSAGE":case"REQUEST_ORDER":return s({},e,{loading:!1,message:t.payload});case"LOAD_MEALS":return s({},e,{meals:t.payload});case"LOAD_DRINKS":return s({},e,{drinks:t.payload});case"LOAD_OFFERS":return s({},e,{offers:t.payload,loading:!1});default:return s({},e)}}},iuot:function(e,t,a){"use strict";var n=a("o0o1"),r=a.n(n),s=a("q1tI"),o=a.n(s),c=a("30+C"),i=a("oa/T"),u=a("Ie8z"),l=a("/MKj"),d=a("vW3o"),p=a("1OyB"),f=a("vuIU"),m=a("JX7q"),b=a("Ji7U"),g=a("md7G"),h=a("foSv"),v=a("rePB"),O=a("DCcX"),y=a("vkoW"),j=a("CaDr"),w=a("OBzv"),S=a("RWZv"),N=a("f0ot"),k=o.a.createElement;function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(b.a)(n,e);var t,a=(t=n,function(){var e,a=Object(h.a)(t);if(_()){var n=Object(h.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(g.a)(this,e)});function n(){var e;Object(p.a)(this,n);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=a.call.apply(a,[this].concat(s)),Object(v.a)(Object(m.a)(e),"state",{message:"",location:"",product:e.props.product,action:"Request delivery",error:"",response:"",redirect:!1,isOpen:!1}),Object(v.a)(Object(m.a)(e),"toggle",(function(){return e.setState({isOpen:!e.state.isOpen})})),Object(v.a)(Object(m.a)(e),"onChange",(function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))})),Object(v.a)(Object(m.a)(e),"onSubmit",(function(t){var a,n,s,o;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),e.setState({error:""}),e.setState({action:"Loading...."}),e.props.token){c.next=6;break}return c.abrupt("return",e.setState({isOpen:!0}));case 6:if(a=e.state,n=a.message,s=a.location,n&&s){c.next=9;break}return c.abrupt("return",e.setState({error:"Fill out all the details",action:"Request delivery"}));case 9:return o={message:n,location:s,user:e.props.user._id,bs:e.props.bs.username},c.next=12,r.a.awrap(e.props.requestOrder(o).then((function(){return e.setState({response:e.props.message,error:"",message:"",location:"",action:"Requested"})})).catch(console.log));case 12:case"end":return c.stop()}}),null,null,null,Promise)})),e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.state.product;return k(O.a,{isOpen:this.props.isOpen,toggle:this.props.toggle},k(y.a,{toggle:this.props.toggle},k("h5",{className:"details_heading"},"Request for ",e.name," delivery")),k(j.a,null,k("form",{onSubmit:this.onSubmit},k("div",{className:"form-group"},this.state.error?k("div",{className:"alert alert-danger"},this.state.error):null,this.state.response?k("div",{className:"alert alert-success"},this.state.response):null,k("div",{className:"form-group"},k("label",{htmlFor:"message"},"What are you ordering?"),k("textarea",{name:"message",className:"form-control",onChange:this.onChange,placeholder:"e.g ".concat(e.name),value:this.state.message,rows:"5",cols:"40"})),k("div",{className:"form-group"},k("label",{htmlFor:"location"},"Where are you at?"),k("input",{type:"text",name:"location",onChange:this.onChange,value:this.state.location,className:"form-control",placeholder:"e.g victoria hostels"})),k("div",{className:"form-group"},k("input",{type:"submit",onClick:this.onSubmit,className:"btn btn-outline-success",value:this.state.action})))),k(d.a,{isOpen:this.state.isOpen,toggle:this.toggle})),k(w.a,null,k("button",{className:"btn btn-outline-danger",onClick:this.props.toggle},"close")))}}]),n}(s.Component),R={requestOrder:S.e,fetchOvo:S.c,fetchUser:N.b},D=Object(l.b)((function(e){return{user:e.user.user,token:e.user.message,user_loading:e.user.loading,loading:e.bs.loading,message:e.bs.message,bs:e.bs.bs}}),R)(x),E=o.a.createElement,A={fetchUser:N.b,claimOrder:S.a};t.a=Object(l.b)((function(e){return{user:e.user.user,user_loading:e.user.loading,token:e.user.message}}),A)((function(e){var t=e.data,a=Object(s.useState)(!1),n=a[0],o=a[1],l=Object(s.useState)(!1),p=l[0],f=l[1];return E(c.a,{className:"bs_card-root"},E("div",{className:"bs_card-details"},E(i.a,{className:"bs_card-content"},E("p",{className:"bs_card-name"},t.name),E("p",{className:"bs_card-price"},"Kshs:",parseInt(t.price).toLocaleString()),E("button",{className:"btn btn-outline-success",onClick:function(){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.token){a.next=3;break}return a.abrupt("return",f(!0));case 3:if(!e.user){a.next=9;break}return a.abrupt("return",o(!0));case 9:return a.next=11,r.a.awrap(e.fetchUser(t).catch(console.log));case 11:if(e.user_loading||!e.user){a.next=13;break}return a.abrupt("return",o(!0));case 13:case 14:case"end":return a.stop()}}),null,null,null,Promise)}},"order"),E(D,{isOpen:n,toggle:function(){return o(!n)},product:t}),E(d.a,{isOpen:p,toggle:function(){return f(!p)}}))),E(u.a,{className:"bs_card-cover",title:t.name},E("img",{src:t.profile,className:"bs_card-img",alt:"Loading.."})))}))},kKAo:function(e,t,a){"use strict";var n=a("Ff2n"),r=a("wx14"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("H2TA"),i=s.forwardRef((function(e,t){var a=e.classes,c=e.className,i=e.component,u=void 0===i?"div":i,l=e.square,d=void 0!==l&&l,p=e.elevation,f=void 0===p?1:p,m=e.variant,b=void 0===m?"elevation":m,g=Object(n.a)(e,["classes","className","component","square","elevation","variant"]);return s.createElement(u,Object(r.a)({className:Object(o.a)(a.root,c,"outlined"===b?a.outlined:a["elevation".concat(f)],!d&&a.rounded),ref:t},g))}));t.a=Object(c.a)((function(e){var t={};return e.shadows.forEach((function(e,a){t["elevation".concat(a)]={boxShadow:e}})),Object(r.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(i)},"oa/T":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("H2TA"),i=s.forwardRef((function(e,t){var a=e.classes,c=e.className,i=e.component,u=void 0===i?"div":i,l=Object(r.a)(e,["classes","className","component"]);return s.createElement(u,Object(n.a)({className:Object(o.a)(a.root,c),ref:t},l))}));t.a=Object(c.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(i)}}]);